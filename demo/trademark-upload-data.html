<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>商标备案</title>
    <link rel="stylesheet" href="public/static/common/css/base.css">
    <link rel="stylesheet" href="public/static/common/css/public.css">
    <link rel="stylesheet" href="public/static/factory/css/main.css">
    <link rel="stylesheet" href="public/static/common/js/layer.mobile/need/layer.css">
</head>
<body>
<!--商标截图-->
<section class="htmleaf-container" style="display: none;">
    <div id="clipArea">
        <div class="photo-clip-view" >
            <div class="photo-clip-moveLayer" >
                <div class="photo-clip-rotateLayer"></div>
            </div>
        </div>
        <div class="photo-clip-mask">
            <div class="photo-clip-mask-left"></div>
            <div class="photo-clip-mask-right" ></div>
            <div class="photo-clip-mask-top" ></div>
            <div class="photo-clip-mask-bottom" ></div>
            <div class="photo-clip-area" ></div>
        </div>
        <a href="javascript:void(0);" class="photoClip-close ">X</a>
    </div>
    <div class="foot-use f28">
        <div class="uploader1 blue">
            <input type="button" name="file" class="button" value="打开图片">
            <input id="file" type="file" onchange="javascript:void(0);" accept="image/*" multiple="" />
        </div>
        <button id="clipBtn">截取</button>
    </div>
    <div id="view" class="photoview" ></div>
</section>
<!--商标所属分类-->
<section id="edittradeMark" style="display:none;">
    <p><span class="friend-tipc">*注意</span>：商标分类至少选择1个,最多只能选择3个</p>
	<ul class="vendorInfoList">
		<li data-id="1">分类11</li>
		<li data-id="2">分类12</li>
		<li data-id="3">分类13</li>
		<li data-id="4">分类14</li>
		<li data-id="5">分类15</li>
	</ul>
</section>
<article class="f24">
    <section class="bottomLine">
        <div class="top_bar top-title">
            <span></span>
            <h2>进行商标备案</h2>
            <a href="" class="home">首页</a>
        </div>
    </section>
    <section>
        <div id="wizard" class="page-bd">
            <nav class="apply-data-nav trademark-nav">
                <ul id="status " class="status f24 weui-flex">
                    <li class="weui-flex-item current"><span class="base_info"></span><em></em>商标名称</li>
                    <li class="weui-flex-item "><span class="upload-prove"></span><em></em>上传资料</li>
                </ul>
            </nav>
            <div class="apply-data-content">
                <div class="apply-module">
                    <form class="trademarkform">
                        <div class="apply-items">
                            <input type="text" class="trademark-name" name="trademarkName" value="" placeholder="商标名称">
                        </div>
                        <div class="logo-license">
                            <div class="half">
                                <a class="logo" id="logox">
                                    <img id="" src='' />
                                    <input type="hidden" class="logo-src" name="logoSrc">
                                </a>
                                <p class="f24">上传商标</p>
                            </div>
                            <div class="clear"></div>
                        </div>
                        <div class="">
                            <a href="javascript:void(0);" class="trademark-type right-arrow">商标所属分类</a>
                            <input type="hidden" class="trademark-info" name="trademarkInfo" value="" data-trademark=""/>
                        </div>
                        <a href="javascript:void(0);" class="one-step step">下一步</a>
                    </form>
                </div>
                <div class="apply-module hide">
                    <p class="f20 upload_st_logo"><span class="friend-tipc">*注意</span>：必须上传图片(格式为jpg、jpeg、png、gif)</p>                    
                    <form class="trademarkform">
                        <ul class="upload-picture-module f24">
                            <li>
                                <div class="picture-module">
                                    <input type="file" class="uploadImg uploadSingleImg" name="">
                                    <img class="upload_img" src="" alt="">
                                    <input type="hidden" class="trademark-certificate img" value="" name="trademarkCertificate"/>
                                </div>
                                <p>商标证书</p>
                            </li>
                            <li>
                                <div class="picture-module">
                                    <input type="file" class="uploadImg uploadSingleImg" name="">
                                    <img class="upload_img" src="" alt="">
                                    <input type="hidden" class="trademark-authorization img" value="" name="trademarkAuthorization"/>
                                </div>
                                <p>商标授权书<br/>(非所有权者需递交)</p>
                            </li>
                        </ul>
                        <a href="javascript:void(0);" class="two-step step">确定递交</a>    
                    </form>                
                </div>
            </div>
        </div>
        <p class="trademark-tipc">商标备案需递交商标证书(已注册或受理的通知书),非商标所有权申请方还需商标授权书,请准备好材料提前拍照以备上传</p>
    </section>
</article>
<script type="text/javascript" src="public/static/common/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="public/static/common/js/public.js"></script>
<script type="text/javascript" src="public/static/common/js/swipe.js"></script>
<script type="text/javascript" src="public/static/common/js/common.js"></script>
<script type="text/javascript" src="public/static/common/js/dialog.js"></script>
<script type="text/javascript" src="public/static/common/js/layer.mobile/layer.js"></script>
<script type="text/javascript" src="public/static/common/js/loginDialog.js"></script>
<script type="text/javascript" src="public/static/common/js/uploadImgToTemp.js"></script>
<script type="text/javascript" src="public/static/common/js/hammer.js"></script>
<script type="text/javascript" src="public/static/common/js/iscroll-zoom.js"></script>
<script type="text/javascript" src="public/static/common/js/jquery.photoClip.js"></script>
<script type="text/javascript">
    $(function(){
        tab_down('.apply-data-nav li','.apply-module','click');
        //填写商标资料
        $('body').on('click','.one-step',function(){
            var tardemark=$('.trademark-info').data('trademark');
            var postData={};
            var postData=$('.trademarkform').serializeObject();
            postData.trademarkInfo=tardemark;
            console.log(postData);
            var content='';
                if(!postData.trademarkName){
                    content='请填写商标全称';
                }else if(!postData.logoSrc){
                    content='请上传商标图片';
                }else if(!postData.trademarkInfo){
                    content='请选择商标所属分类';
                }
                if(content){
                    dialog.error(content);
                    return false;
                }else{
                    $('.weui-flex-item:eq(0)').removeClass('current');
                    $('.weui-flex-item:eq(1)').addClass('current');
                    $('.apply-module:eq(0)').hide();
                    $('.apply-module:eq(1)').show();
                }
        });
        //商标所属分类
        var edittradeMark=$('#edittradeMark').html();
        $('body').on('click','.trademark-type',function(){
             
            layer.open({
                title:['选择商标所属分类','border-bottom:1px solid #d9d9d9;'],
                className:'trademarkTypeLayer',
                content:edittradeMark,
                btn:['确定','取消'],
                success:function(){
                    var tardeMarkId=$('.trademark-info').data('trademark');
                    $('.trademarkTypeLayer li').on('click',function(){
                        var _this=$(this);
                        var tradeMarkLen=$('.trademarkTypeLayer .current').length;            
                        if(_this.hasClass('current')||tradeMarkLen<3){
                            _this.toggleClass('current');
                           
                        }else{
                            return false;
                        }  
                                         
                    });
                    for(var i=0;i<tardeMarkId.length;i++){
                        $.each($('.trademarkTypeLayer li'),function(){
                            var _this=$(this);
                            var currentId=_this.data('id');
                            if(tardeMarkId[i]==currentId){
                                _this.addClass('current');
                                
                            }
                            
                        })    
                    }   
                },
                yes:function(index){
                    var tardeMarkArr=[];
                    
                    $.each($('.trademarkTypeLayer li'),function(){
                        var _this=$(this);
                        if(_this.hasClass('current')){
                            tardeMarkLayerId  =_this.data('id');
                            tardeMarkArr.push(tardeMarkLayerId);
                        }
                        
                    })
                    $('.trademark-info').data('trademark',tardeMarkArr);
                    console.log($('.trademark-info').data('trademark'));
                    layer.close(index);
                }
            })
        })
        //裁剪商标logo
        var clipImg = '';
        $("#clipArea").photoClip({
            width: 199,
            height: 166,
            file: "#file",
            view: "#view",
            ok: "#clipBtn",
            clipFinish: function(img) {
                clipImg = img;
                // $.post("uploadImgToTemp", { img: clipImg , compress:false },function(msg){
                //     if(msg.status == 0){
                //         layer.open({
                //             content:msg.info,
                //             time:2
                //         });
                //         return false;
                //     }else if(msg.status == 1){
                //         $('body').data('clipAvatar',msg.info);
                //     }
                // },'json');
            }
        });
        $(".logo").click(function(){
            $(".htmleaf-container").show();
        });
        $("#clipBtn").click(function(){
            $('.logo img').attr('src',clipImg).addClass('active');
            $('.logo-src').val(clipImg);
            $(".htmleaf-container").hide();
        });
        $('.photoClip-close').click(function(){
            $(".htmleaf-container").hide();
        })

        //递交商标资料
        $('body').on('click','.two-step',function(){
            var trademark=$('.trademark-info').data('trademark');
            var postData={};
            var postData=$('.trademarkform').serializeObject();
            postData.trademarkInfo=trademark;
            var content='';
                if(!postData.trademarkName){
                    content='请填写商标名称';
                }else if(!postData.logoSrc){
                    content='请上传商标图片';
                }else if(!postData.trademarkInfo){
                    content='请选择商标所属分类';
                }else if(!postData.trademarkCertificate){
                    content='请上传商标证书图片';
                }else if(!postData.trademarkAuthorization){
                    content='请上传商标授权书图片';
                }

                if(content){
                    dialog.error(content);
                    return false;
                }
                $.post("",{postData:postData},function(){

                })
        })

    })
</script>
</body>

</html>