<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>开店申请</title>
    <link rel="stylesheet" href="public/static/common/css/base.css">
    <link rel="stylesheet" href="public/static/common/css/public.css">
    <link rel="stylesheet" href="public/static/factory/css/main.css">
    <link rel="stylesheet" href="public/static/common/js/layer.mobile/need/layer.css">
</head>
<body>
<!---->
<section id="applyNewStore" style="display:none;">
    <div class="new-store-type">
        <ul id="status " class="status f24 weui-flex">
            <li class="weui-flex-item switch-item current"><span class="base_info"></span><em></em>店铺类型</li>
            <li class="weui-flex-item switch-item "><span class="upload-prove"></span><em class="last"></em>店铺名称</li>
        </ul>
        <div class="error_tipc"></div>
        <div class="stroe-content">
            <div class="new-store-item store-one">
                <span class="content-label">1)选择店铺类型</span>
                <div class="store-type-menu" data-store-type="type">
                    <a class="" href="javascript:void(0);" data-type="0">企业官方旗舰店</a>
                    <a href="javascript:void(0);" data-type="1">品牌官方旗舰店</a>
                </div>
                <span class="content-label">2)设定经营模式</span>
                <div class="store-type-menu" data-store-pattern="pattern">
                    <a class="" href="javascript:void(0);" data-pattern="0">B2B采购商城</a>
                    <a href="javascript:void(0);" data-pattern="1">B2B分成商城</a>
                    <a href="javascript:void(0);" data-pattern="2">B2B零售商城</a>
                </div>
                <a class="next-step" href="javascript:void(0);">下一步</a>
            </div>
            <div class="new-store-item store-two hide">
                <ul>
                    <li class="columns_flex store-list" data-store-id="1">
                        <img src="public/static/common/img/default/no_pic_40.jpg" alt="">
                        <div>
                            <p>官方旗舰店1</p>
                            <p>B2C零售商城</p>
                        </div>
                    </li>
                    <li class="columns_flex store-list" data-store-id="2">
                        <img src="public/static/common/img/default/no_pic_40.jpg" alt="">
                        <div>
                            <p>官方旗舰店2</p>
                            <p>B2C零售商城</p>
                        </div>
                    </li>
                    <li class="columns_flex store-list" data-store-id="3">
                        <img src="public/static/common/img/default/no_pic_40.jpg" alt="">
                        <div>
                            <p>官方旗舰店3</p>
                            <p>B2C零售商城</p>
                        </div>
                    </li>
                </ul>
                <!--<a class="next-step" href="javascript:void(0);">申请开通</a>-->
            </div>
        </div>
    </div>
</section>
<article class="f24">
    <section class="top_nav_fixed">
        <div class="top_bar columns_flex">
             <div class="each_column">
                <a class="personal_center">我的</a>
             </div>
             <div class="each_column top_search_module">
                 <input type="button" class="search_btn"/>
                 <input type="text" class="search_text" placeholder="美尚云搜索"/>
             </div>
            <div class="each_column">
            <a class="home">首页</a>
            </div>
        </div> 
    </section>
    <section class="specific_type bottomLine">
        <div class="columns_flex f20">
            <a>企业档案</a>
            <a>商标备案</a>
            <a class="column_type current">开店申请</a>
            <a>部门角色</a>
            <a>账号授权</a>
        </div>
    </section>
    <section class="f24 apply-store-content">
         <div class="thead-td">
             <span class="cols">店铺名称</span>
             <span class="cols">状态</span>
             <span class="cols">备注</span>
         </div>
         <ul>
             <li class="thead-td">
                 <div class="cols">
                     <img class="left" src="public/static/common/img/default/no_pic_40.jpg" alt="">
                     <div class="store-type ">
                         <div>
                             <span>某某</span>官方旗舰店
                         </div>
                         <p>B2B采购商城</p>
                     </div>
                 </div>
                 <div class="cols">
                    <span>营业中</span>
                 </div>
                 <div class="cols">
                    <a class="text-color-gr " href="javascript:void(0);" >申请关店></a>
                 </div>
             </li>
         </ul>
    </section>
    <a href="javascript:void(0);" class="apply-new-store">申请开新店</a>
</article>
<script type="text/javascript" src="public/static/common/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="public/static/common/js/public.js"></script>
<script type="text/javascript" src="public/static/common/js/common.js"></script>
<script type="text/javascript" src="public/static/common/js/dialog.js"></script>
<script type="text/javascript" src="public/static/common/js/layer.mobile/layer.js"></script>
<script type="text/javascript">
    $(function(){
        var postData={};
        //切换
        $('body').on('click','.applyNewStoreLayer li.weui-flex-item',function(){
            var index=$(this).index();
            $(this).addClass('current').siblings().removeClass('current');
            if(index==0){
                $('.stroe-content .store-one').show();
                $('.stroe-content .store-two').hide();
            }else{
                $('.stroe-content .store-one').hide();
                $('.stroe-content .store-two').show();
            }
        });
        //选择类型和模式
        $('body').on('click','.store-type-menu a',function(){
            $(this).addClass('current').siblings().removeClass('current');
        });
        
        //选择店铺
        $('body').on('click','.applyNewStoreLayer .store-list',function(){
            var _this=$(this);
                _this.addClass('current').siblings().removeClass('current');
        });
        //下一步
        var typeId,patternId;
        $('body').on('click','.next-step',function(){
            var storeType=$('.applyNewStoreLayer div[data-store-type="type"]').find('a');
            var storePattern=$('.applyNewStoreLayer div[data-store-pattern="pattern"]').find('a');
            if(storeType.hasClass('current')&&storePattern.hasClass('current')){
                typeId=$('.applyNewStoreLayer .store-one').find('a.current').data('type');
                patternId=$('.applyNewStoreLayer div[data-store-pattern="pattern"]').find('a.current').data('pattern');
                $('.applyNewStoreLayer li').siblings().removeClass('current').eq(1).addClass('current');
                $('.store-two').show();
                $('.store-one').hide();
                postData={
                    typeId:typeId,
                    patternId:patternId,
                }
                console.log(postData);
            }else{
                errorTipc('请选择店铺类型和经营模式');
            }
        });
        //开店弹窗
        var applyNewStore=$('#applyNewStore').html();
        $('body').on('click','.apply-new-store',function(){
            layer.open({
                title:['申请开新店','border-bottom:1px solid #d9d9d9;'],
                className:'applyNewStoreLayer',
                content:applyNewStore,
                btn:['申请开通'],
                yes:function(index){
                    
                    var storeType=$('.applyNewStoreLayer div[data-store-type="type"]').find('a');
                    var storePattern=$('.applyNewStoreLayer div[data-store-pattern="pattern"]').find('a');
                    var storeList=$('.applyNewStoreLayer .store-list');
                    if(storeType.hasClass('current')&&storePattern.hasClass('current')){
                        if(storeList.hasClass('current')){
                            storeId=$('.applyNewStoreLayer .store-list.current').data('store-id');
                            postData={
                                typeId:typeId,
                                patternId:patternId,
                                storeId:storeId
                            };
                            console.log(postData);
                            layer.close(index);
                        }
                        else{
                            errorTipc('请选择店铺');
                            return false;
                        }
                    }else {
                        errorTipc('请选择店铺类型和经营模式');
                        return false;
                    }
                }
            })
        });
        
    })
</script>
</body>

</html>