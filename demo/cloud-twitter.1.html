<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <title>云推客联营计划</title>
    <link rel="stylesheet" href="public/static/common/css/base.css">
    <link rel="stylesheet" href="public/static/common/css/public.css">
    <link rel="stylesheet" href="public/static/factory/css/main.css">
    <link rel="stylesheet" href="public/static/common/js/layer.mobile/need/layer.css">
</head>
<body>
<!--云推客发布-->
<section id="cloudTwitter" style="display: none;">
    <div class="twitter-release-content"> 
        <textarea class="twitter-text" rows="" cols="" placeholder="消息文字"></textarea>
        <ul class="multi-picture-module">
            <!--<img src="" alt="" class="abc"/>-->
            <!--accept="image/*"   multiple属性是多选-->
        </ul>
        <div class="release-news">
            <span class="video-camera"></span>
            <input class="camera-btn uploadSingleImg" type="file" id="file" capture="camera" data-num="9">
        </div>
    </div>
</section>
<!--云推客封面照片-->
<section class="htmleaf-container" style="display: none;">
    <div id="clipArea">
        <div class="photo-clip-view" >
            <div class="photo-clip-moveLayer" >
                <div class="photo-clip-rotateLayer"></div>
            </div>
        </div>
        <div class="photo-clip-mask">
            <div class="photo-clip-mask-left"></div>
            <div class="photo-clip-mask-right" ></div>
            <div class="photo-clip-mask-top" ></div>
            <div class="photo-clip-mask-bottom" ></div>
            <div class="photo-clip-area" ></div>
        </div>
        <a href="javascript:void(0);" class="photoClip-close ">X</a>
    </div>
    <div class="foot-use f28">
        <div class="uploader1 blue">
            <input type="button" name="file" class="button" value="打开图片">
            <input id="file" type="file" onchange="javascript:void(0);" accept="image/*" multiple="" />
        </div>
        <button id="clipBtn">截取</button>
    </div>
    <div id="view" class="photoview" ></div>
</section>
<article class="f24">
    <section class="separation-line">
        <div class="screenshot-wrap">
            <div class="half screenshot-bg">
                <a class="logo" id="logox">
                    <img class="common_default_img" id="" src='' />
                    <input type="hidden" class="logo-src" name="logoSrc">
                </a>
            </div>
            <div class="clear"></div>
        </div>    
        <div class="content-padding">
            <div class="columns_flex l-r-sides">
                <span><img src="" alt="">华大基因</span>
                <a href=""></a>
            </div>
            <div class="columns_flex l-r-sides">
                <a href="javascript:void(0);">点击添加企业口号</a>
                <span><span>555</span>人关注</span>
                <span><span>某某</span>推客</span>
            </div>
        </div>    
    </section>
    <section class="content-padding twitter-release-content">
        <div class="columns_flex">
            <div class="release-date">
                <span>今天</span>
            </div>
            <div class="release-news">
                <!--accept="image/*"   multiple属性是多选-->
                <!--<span class="video-camera"></span>
                <input class="camera-btn" type="file" id="file" multiple="" capture="camera" >-->
                <a class="video-camera release-msg" href="javascript:void(0);"></a>
            </div>
        </div>
        <div class="columns_flex">
            <div class="release-date">
                <span>083月</span>
            </div>
            <div>
                <div class="columns_flex">
                    <div class="photo-frame">
                        <img class="common_default_img" src="public/static/common/img/icons/long.png" alt="">
                        <img class="common_default_img" src="public/static/common/img/banner/wt-banner1.jpg" alt="">
                        <img class="common_default_img" src="public/static/common/img/banner/wt-banner.jpg" alt="">
                    </div>
                    <div >
                        <p>这个产品挺好用的这个产品挺好用的这个产品挺好用的这个产品挺好用的</p>
                        <span>共<span>2</span>张</span>
                    </div>
                </div>
                <div class="columns_flex">
                    <div class="photo-frame">
                        <!--<img class="common_default_img" src="public/static/common/img/default/no_pic_100.jpg" alt="">-->
                        <img class="common_default_img" src="public/static/common/img/icons/long.png" alt="">
                        <img class="common_default_img" src="public/static/common/img/icons/long.png" alt="">
                    </div>
                    <div >
                        <p>这个产品挺好用的这个产品挺好用的这个产品挺好用的这个产品挺好用的</p>
                        <span>共<span>2</span>张</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="columns_flex">
            <div class="release-date">
                <span>083月</span>
            </div>
            <div>
                <div class="columns_flex">
                    <div class="photo-frame">
                        <img class="common_default_img" src="public/static/common/img/banner/wt-banner1.jpg" alt="">
                        <img class="common_default_img" src="public/static/common/img/banner/wt-banner1.jpg" alt="">
                        <img class="common_default_img" src="public/static/common/img/banner/wt-banner.jpg" alt="">
                        <img class="common_default_img" src="public/static/common/img/banner/wt-banner1.jpg" alt="">
                    </div>
                    <div >
                        <p>这个产品挺好用的这个产品挺好用的这个产品挺好用的这个产品挺好用的</p>
                        <span>共<span>2</span>张</span>
                    </div>
                </div>
                <div class="columns_flex">
                    <div class="photo-frame">
                        <!--<img class="common_default_img" src="public/static/common/img/default/no_pic_100.jpg" alt="">-->
                        <img class="common_default_img" src="public/static/common/img/icons/long.png" alt="">
                        <img class="common_default_img" src="public/static/common/img/icons/long.png" alt="">
                    </div>
                    <div >
                        <p>这个产品挺好用的这个产品挺好用的这个产品挺好用的这个产品挺好用的</p>
                        <span>共<span>2</span>张</span>
                    </div>
                </div>
            </div>
        </div>
    </section>
</article>
<script type="text/javascript" src="public/static/common/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="public/static/common/js/public.js"></script>
<script type="text/javascript" src="public/static/common/js/swipe.js"></script>
<script type="text/javascript" src="public/static/common/js/common.js"></script>
<script type="text/javascript" src="public/static/common/js/dialog.js"></script>
<script type="text/javascript" src="public/static/common/js/layer.mobile/layer.js"></script>
<script type="text/javascript" src="public/static/common/js/loginDialog.js"></script>
<script type="text/javascript" src="public/static/common/js/hammer.js"></script>
<script type="text/javascript" src="public/static/common/js/iscroll-zoom.js"></script>
<script type="text/javascript" src="public/static/common/js/jquery.photoClip.js"></script>
<script type="text/javascript">
    $(function(){
        //裁剪商标logo
        var clipImg = '';
        $("#clipArea").photoClip({
            width: 300,
            height: 270,
            file: "#file",
            view: "#view",
            ok: "#clipBtn",
            clipFinish: function(img) {
                clipImg = img;
                // $.post("uploadImgToTemp", { img: clipImg , compress:false },function(msg){
                //     if(msg.status == 0){
                //         layer.open({
                //             content:msg.info,
                //             time:2
                //         });
                //         return false;
                //     }else if(msg.status == 1){
                //         $('body').data('clipAvatar',msg.info);
                //     }
                // },'json');
            }
        });
        $(".logo").click(function(){
            $(".htmleaf-container").show();
        });
        $("#clipBtn").click(function(){
            $('.logo img').attr('src',clipImg).addClass('active').show();
            $('.logo').css('height','auto');
            $('.logo-src').val(clipImg);
            $(".htmleaf-container").hide();
        });
        $('.photoClip-close').click(function(){
            $(".htmleaf-container").hide();
        });

        //发布消息
        var cloudTwitter=$('#cloudTwitter').html();
        $('body').on('click','.release-msg',function(){
            var pageii = layer.open({
                title:['发云推客圈消息','border-bottom:1px solid #d9d9d9;'],
                className:'cloudTwitterLayer',
                type: 1,
                content: cloudTwitter,
                anim: 'up',
                style: 'position:fixed; left:0; top:0; width:100%; height:100%; border: none; -webkit-animation-duration: .5s; animation-duration: .5s;',
                success:function(){
                    var winHeight=$(window).height();
                    $('.twitter-release-content').css('height',winHeight-120+'px');
                },
                btn:['发布']
            });
        });

        //多图片上传
    $('body').on('change','#file',function(){
        var file = $(this);
        var fileList = $(this).get(0).files;
        var imgContainer = $('.multi-picture-module');
        var imgArr = [];
        var num=file.data('num');//限制个数  
        console.log(num);
        if(num==6&&$('.editDetailLayer li').length==num){
            errorTipc('只能上传'+num+'张图片');
            return false;
        }
        if(num==0){ //0代表无限制个数
            uploadPic(imgContainer,fileList.length);
        }else{
            uploadPic(imgContainer,num);
        }      
    });
    function uploadPic(containerObj,len){
       console.log(len);
        for (var i = 0; i < len; i++) {                
            var img = event.target.files[i];
            var obj=$(this).parent();
            // 判断是否图片
            if(!img){
                return false;
            }
            // 判断图片格式
            var imgRegExp=/\.(?:jpg|jpeg|png|gif)$/;
            if(!(img.type.indexOf('image')==0 && img.type && imgRegExp.test(img.name)) ){
                layer.open({
                    content:'请上传：jpg、jpeg、png、gif格式图片',
                    time:2
                }) ;
            }

            var reader = new FileReader();
            reader.readAsDataURL(img);

            reader.onload = function(e){
                var imgUrl=e.target.result;
                var html=$('#img_list').html();
                //imgArr.push(imgUrl);
                var img=  $('<img src="" class="upload_img common_default_img">');
                img.attr("src", imgUrl);
                var imgAdd = $('<li><div class="picture-module active"><span class="delete-picture">X</span></div></li>');
                imgAdd.find('.picture-module').append(img);
                containerObj.append(imgAdd);
            }
           
        };
    }

    })
</script>
</body>

</html>