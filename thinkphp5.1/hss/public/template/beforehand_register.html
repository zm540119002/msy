<!--会员预登记模板-->
<section class="member-register-tpl" style="display:none;">
    <a href="javascript:void(0);" class="close_layer_pop" style="top:0.25rem;left:0.25rem;"></a>
    <div id="wizard" class="page-bd">
        <div class="apply-data-content">
            <div class="apply-module ">
                <form class="applicant_form">
                    <div class="apply-items">
                        <input type="text" class="name " name="name" value="" placeholder="机构名称(选填)">
                    </div>
                    <div class="apply-items">
                        <input type="text" class="applicant " name="applicant" value="" placeholder="你的姓名(必填)">
                    </div>
                    <div class="apply-items">
                        <input type="tel" class="mobile " name="mobile" value="" placeholder="手机号码(必填)">
                    </div>
                    <a href="javascript:void(0);" class="next-step step beforehand-register" data-jump_url="{:url('Franchise/franchiseSettlement')}">确定</a>
                </form>
            </div>
        </div>
    </div>
</section>
<script type="text/javascript">
    var beforehandRegisterTriggerLayerIndex = -1;
    function beforehandRegisterTrigger(){
        let memberRegisterTpl=$('.member-register-tpl').html();
        beforehandRegisterTriggerLayerIndex = layer.open({
            title:['会员预先登记','border-bottom:1px solid #d9d9d9;'],
            type:1,
            anim:'up',
            className:'memberRegTpl',
            content:memberRegisterTpl
        });
    }
    $(function(){
        //确定
        $('body').on('click','.next-step',function(){
            var postData = $('.applicant_form').serializeObject();
            var content='';
            if(!postData.applicant){
                content='请填写你的姓名';
            }else if(!register.phoneCheck(postData.mobile)){
                content='请填写手机号码';
            }
            if(content){
                dialog.error(content);
                return false;
            }
            let _this = $(this);
            let config = {
                clickObj:_this,
                postData:postData,
                layerIndex:beforehandRegisterTriggerLayerIndex
            };
            login_success_callback_private = function(){
                asyncVerify(config);
            };
            register_success_callback_private = function(){
                asyncVerify(config);
            };
            asyncVerify(config);
        });
        // 关闭层
        $('body').on('click','.memberRegTpl .close_layer_pop',function(){
            $(this).parents('.layui-m-layer').remove();
        });
    });
</script>