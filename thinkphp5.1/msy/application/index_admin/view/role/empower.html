{extend name="template/base_pc.html" /}
{block name="css-customize"}
    <link type="text/css" rel="stylesheet" href="public_admin_common_css/fenlei.css" />
    <link type="text/css" rel="stylesheet" href="public_admin_common_css/skin.css" />
{/block}
{block name="content"}
    <div class="page">
        <div class="fixed-bar">
            <div class="item-title">
                <ul class="tab-base">
                    <li><a href="{:url('Role/manage')}" ><span>管理</span></a></li>
                    <li><a href="{:url('Role/edit')}"><span>编辑</span></a></li>
                    <li><a href="{:url('Role/empower')}" class="current"><span>赋权</span></a></li>
                </ul>
            </div>
        </div>
        <div class="fixed-empty"></div>
        <div style="margin:15px 0 0 20px;">
            <table class="table tb-type2">
                {include file="role/node_list" /}
                <tfoot>
                    <tr class="tfoot">
                        <td>
                            <input type="checkbox" class="check_all_2" id="check_all_2">
                            <label for="check_all_2" class="all_checkbox">全选</label>
                            <a href="JavaScript:void(0);" class="a-del-batch">批量删除</a>
                        </td>
                    </tr> 
                    <tr class="tr-margin-item">
                        <td height="60" width="50%" align="left">
                            <a href="javascript:void(0);"><input class="button_save_black_4" value="确定" type="button"></a>
                            <input class="button_save_black" name="add0" value="返回" type="button">
                        </td>
                    </tr>           
                </tfoot>
            </table>
        </div>
    </div>
{/block}
{block name="footer"}{/block}
{block name="script"}
<script type="text/javascript">
    $(function(){
        //确定
        $('.button_save_black_4').on('click',function(){
            var postData = {};
            postData.nodeIds = [];
            $.each($('tbody').find('tr[level=2]'),function(){
                if($(this).find('.check_item_2').prop('checked')){
                    postData.nodeIds.push($(this).data('id'));
                }
            });
            postData.roleId = '{$roleId}';
            $.post(action,postData,function(msg){
                return;
                dialog.msg(msg,'',function () {
                    location.href = controller + 'manage';
                });
            },'JSON');
        });
        //返回
        $('.button_save_black').click(function(){
            location.href = controller + 'manage';
        });
    });
</script>
{/block}